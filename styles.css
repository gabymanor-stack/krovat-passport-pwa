:root{
  --bg:#0b1120;
  --page-w:420px;
  --page-h:595px;
  --scale:0.92;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:var(--bg);color:#e2e8f0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
header{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;background:rgba(255,255,255,0.04);backdrop-filter:blur(6px);position:sticky;top:0;z-index:5}
header h1{font-size:16px;margin:0}
.controls{display:flex;align-items:center;gap:8px}
.controls button{padding:6px 10px;border:0;border-radius:8px;background:#1e293b;color:#fff}
.menu{position:relative}
.dropdown{position:absolute;right:0;top:36px;background:#0f172a;border:1px solid #334155;border-radius:10px;display:flex;flex-direction:column;min-width:200px;box-shadow:0 10px 30px rgba(0,0,0,.4)}
.dropdown.hidden{display:none}
.dropdown button,.filelike{padding:10px 12px;text-align:left;border:0;background:transparent;color:#e2e8f0}
.dropdown button:hover,.filelike:hover{background:#111827}
.filelike{cursor:pointer}

main{display:flex;flex-direction:column;align-items:center;gap:10px;padding:16px}
.book{width:calc(var(--page-w)*var(--scale));height:calc(var(--page-h)*var(--scale));position:relative;perspective:1400px}
.page{position:absolute;left:0;top:0;width:100%;height:100%;background:#111;background-size:cover;background-position:center center;box-shadow:0 18px 40px rgba(0,0,0,0.55);border-radius:10px;overflow:hidden;transform-origin:left center;transition:transform 520ms cubic-bezier(.2,.9,.2,1), opacity 360ms}
.page.prev{transform:translateX(-100%) rotateY(-10deg) scale(.98);opacity:0}
.page.current{transform:translateX(0) rotateY(0) scale(1);opacity:1}
.page.next{transform:translateX(100%) rotateY(10deg) scale(.98);opacity:0}
.page.hidden{display:none}
.page canvas.stamps{position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none}

.hint{opacity:.7;font-size:12px;margin:0}
footer{padding:10px 12px;opacity:.6}
@media (max-width:480px){:root{--scale:.82} header h1{font-size:14px}}

.page {
  position: relative;
  width: 100%;
  height: 100%;
  background: #cfd6e3; /* light paper fallback so itâ€™s never black */
  overflow: hidden;
}

.page-bg {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: contain;   /* preserves passport page ratio */
  user-select: none;
  -webkit-user-drag: none;
  pointer-events: none;  /* taps go to the page for stamping */
}

canvas.stamps {
  position: absolute;
  inset: 0;
}
